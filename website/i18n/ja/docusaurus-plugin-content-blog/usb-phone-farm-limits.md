---
slug: usb-phone-farm-limits
title: 通常のPCに40台以上の電話を接続できない理由
authors: tikMatrix
tags: [Hardware, Phone Farm, USB, TikTok Automation, TikMatrix]
---

> USBはホストあたり**127デバイス**をサポートします — *理論上*。  
> 実際には、ほとんどのコンシューマーマザーボードは、チップセット/ファームウェアの制限とハブトポロジーにより、約**~40デバイス**で壁に当たります。

<!-- truncate -->
---
![USB limits for phone farms](/img/blog/usb-phone-farm.webp)

## 🧠 1. 理論対現実

- **仕様書：** 1つのUSBホストは最大**127デバイス**（ハブを含む）をアドレス可能です。  
- **現実世界：** コンシューマーボードは、以下の理由により、約**30～45台の電話**で上限に達することがよくあります：
  - ホストコントローラーファームウェアの制限
  - チップセットパスの混雑（共有レーン）
  - ハブの深さ/トポロジーの制約（階層、電力）

> 結論：制限はOSではなく、**コントローラー+ボード設計**によるものです。

---

## 🖥️ 2. サーバーグレードボードがよりスケールする理由

サーバー/ワークステーションボード（例：**X79クラス**、HEDTプラットフォーム）は一般的に：

- **より多くのルートホストコントローラー**を提供
- デバイスファンアウトに対する**ファームウェアキャップが少ない**
- より良い**レーン割り当て**と電力安定性を提供

**結果：** 同じOSとハブで、コンシューマーボードの上限を超えることが現実的に可能です。

---

## 🔌 3. 実用的な配線のヒント（より多くのデバイスを認識させる）

1. **リアI/Oポート**を使用（マザーボードへの直接トレース）、フロントパネルヘッダーではなく。  
2. 大規模ファーム用に**USB 2.0（黒）**を優先；多数のMTP/ADBデバイスで気まぐれになる可能性のある**USB 3.0（青）**パスを避ける。  
3. **BIOSセットアップ：**  
   - **XHCIを無効化**  
   - **EHCIを有効化**  
   これにより、大規模ファームをより信頼性高く列挙する安定したUSB2ホストパスが強制されます。

> 電力が重要：**電源付きハブ**（品質の良いブリック）、短い高品質ケーブルを使用し、複数のルートコントローラーに負荷を分散させます。

---

## 🧩 4. トポロジー&電力チェックリスト

| ベクター | 推奨事項 | 注記 |
|---|---|---|
| ハブ階層 | ≤3階層の深さ | カスケードが多すぎる=タイムアウト |
| ハブ選択 | 7～10ポート電源付きハブ | ハブバンクごとに別のPSU |
| ケーブル | 短く、シールド付き | 不安定なリードを早めに交換 |
| ポート | リアI/Oを優先 | フロントヘッダーはパスを共有 |
| ミックス | 電話をUSB2パスに保つ | USB3はストレージのみに予約 |

---

## 🧪 5. クイックトラブルシューティング

- **電話がランダムに接続/切断：** 電力予算または不良ケーブル → PSU/ケーブルを交換。  
- **新しいデバイスが~38～42で列挙を停止：** コントローラー制限 → ハブを異なるルートポートに移動/2番目のコントローラーカードを追加/サーバーグレードボードに切り替え。  
- **ADBスキャン中の高CPU：** 1つのコントローラー上のデバイスが多すぎる → ポート全体でハブを再バランス。

---

## ⚙️ 6. TikMatrixの推奨設定

- ボード：**サーバー/HEDT**（例：X79クラスまたはより新しいワークステーションチップセット）  
- ハブ：異なるルートポート上の複数の**電源付きUSB2ハブ**  
- BIOS：**XHCI オフ、EHCI オン**  
- OS：ADBドライバー付きの標準Windows；マルチスクリーン用にWebView/グラフィックスを安定に保つ

---

## 🏁 まとめ

はい、USBは127デバイスをアドレス可能です — しかし、コンシューマーボードは**~40**近くでファームウェア/チップセットの壁に当たります。  
**リアUSB2**、**電源付きハブ**、**EHCI優先BIOS**を使用 — またはさらにスケールするために**サーバーグレード**にします。

👉 [TikMatrix.comを訪問](https://www.tikmatrix.com)

---

*このガイドは、TikMatrixでの実用的な電話ファームビルドと列挙テストを反映しています。*
