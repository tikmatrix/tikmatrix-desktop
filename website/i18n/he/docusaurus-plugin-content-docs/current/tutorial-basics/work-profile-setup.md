# הגדרת Work Profile

TikMatrix תומך בתצורת משתמש Work Profile נפרדת עבור כל מכשיר, זה שימושי מאוד לשימוש במכשירי ארגון או יישומים כפולים.

## מהו Work Profile

Work Profile (פרופיל עבודה) הוא תכונה של Android המאפשרת יצירת סביבת עבודה עצמאית באותו מכשיר. באמצעות תצורת מזהי משתמש שונים, ניתן:

- להשתמש ב-TikMatrix באופן רגיל במכשירים המנוהלים על ידי הארגון
- להגדיר תצורות משתמש שונות עבור סביבות אפליקציה שונות
- להשיג ניהול מכשירים ובקרת הרשאות עדינה יותר

## שימוש בכלי Shelter לשיבוט אפליקציות

לפני תצורת Work Profile, יש צורך להשתמש בכלי Shelter לשיבוט אפליקציות TikTok ו-TikMatrix:

### מהו Shelter

Shelter הוא יישום קוד פתוח שיכול ליצור ולנהל Work Profile במכשירי Android. הוא מאפשר להפעיל אפליקציות כפולות בסביבת עבודה מבודדת.

### התקנת Shelter

1. הורד את Shelter מ-[F-Droid](https://f-droid.org/packages/net.typeblog.shelter/) או [Google Play Store](https://play.google.com/store/apps/details?id=net.typeblog.shelter)
2. התקן ופתח את Shelter במכשיר
3. עקוב אחר אשף ההגדרה כדי ליצור Work Profile

### שיבוט האפליקציות הנדרשות

לאחר הגדרת Shelter, יש צורך לשבט את אפליקציות TikTok ו-TikMatrix:

1. **שיבוט אפליקציית TikTok**:
   - פתח את Shelter ועבור ללשונית "ממשק ראשי"
   - מצא את TikTok ברשימת האפליקציות
   - לחץ על כפתור "שיבוט לפרופיל עבודה"
   - המתן להשלמת תהליך השיבוט

2. **שיבוט אפליקציית TikMatrix**:
   - ב-Shelter, מצא את TikMatrix ברשימת האפליקציות
   - לחץ על כפתור "שיבוט לפרופיל עבודה"
   - אשר את פעולת השיבוט

### אימות שיבוט מוצלח

לאחר שיבוט מוצלח:

- תראה את TikTok ו-TikMatrix עם סמל תיק במגירת האפליקציות
- אלו הן גרסאות Work Profile של האפליקציות
- האפליקציות המקוריות בפרופיל הראשי נשארות ללא שינוי

## כיצד להגדיר Work Profile

### 1. פתיחת סרגל הכלים של המכשיר

כאשר המכשיר שלך מחובר ומוצג בממשק הראשי של TikMatrix:

1. לחץ פעמיים על כרטיס המכשיר כדי להיכנס למצב מסך גדול
2. סרגל כלים יופיע בצד ימין של מסך המכשיר
3. סרגל הכלים מצומצם כברירת מחדל ויתרחב אוטומטית בעת ריחוף עם העכבר

### 2. מציאת כפתור Work Profile

בתחתית סרגל הכלים, תראה כפתור עם סמל תיק, זהו כפתור תצורת Work Profile.

### 3. הגדרת מזהה משתמש

1. לחץ על כפתור סמל התיק
2. הזן את מזהה המשתמש בחלון המוקפץ (לדוגמה: 10)
3. לחץ על כפתור "שמור"

### 4. אישור התצורה

לאחר תצורה מוצלחת, המערכת תציג הודעה "הגדרת משתמש פרופיל עבודה נשמרה".

## הסבר על מזהה משתמש

### מזהי משתמש נפוצים

- **0**: משתמש ראשי (משתמש ברירת מחדל)
- **10**: משתמש פרופיל עבודה ראשון
- **11**: משתמש פרופיל עבודה שני
- מזהי משתמש נוספים ממשיכים בהתאם

### כיצד למצוא מזהה משתמש

אם אינך בטוח לגבי מזהה המשתמש במכשיר, ניתן למצוא אותו בדרכים הבאות:

```bash
adb shell pm list users
```

או בכלי ניפוי הבאגים של TikMatrix הפעל:

```bash
pm list users
```

דוגמת פלט:

```text
Users:
  UserInfo{0:Owner:c13} running
  UserInfo{10:Work profile:1030} running
```

## אחסון קובץ תצורה

תצורת Work Profile נשמרת אוטומטית לקובץ `data/work_profile_user.json`, בפורמט הבא:

```json
{
  "מספר_סידורי_מכשיר1": "10",
  "מספר_סידורי_מכשיר2": "0",
  "מספר_סידורי_מכשיר3": "11"
}
```

## ניהול תצורת מכשיר

### הצגת תצורה נוכחית

תצורת Work Profile של כל מכשיר היא עצמאית, ניתן:

1. להגדיר מזהה משתמש שונה עבור כל מכשיר
2. לשנות את תצורת המשתמש של מכשיר קיים בכל עת
3. לנקות תצורה (הזן ערך ריק ושמור כדי למחוק תצורה)

### ניהול בכמות גדולה

אם יש צורך לנהל מספר רב של מכשירים, ניתן לערוך ישירות את הקובץ `data/work_profile_user.json`:

1. סגור את אפליקציית TikMatrix
2. פתח את קובץ התצורה
3. הוסף או שנה תצורות מכשיר בפורמט JSON
4. הפעל מחדש את TikMatrix

## פתרון בעיות

### בעיות נפוצות

#### ש: ביצוע פקודה נכשל לאחר הגדרת Work Profile

ת: אנא אשר:

- האם מזהה המשתמש נכון
- האם קיים משתמש מתאים במכשיר
- האם יש מספיק הרשאות לגישה למשתמש זה

#### ש: כיצד לבטל תצורת Work Profile

ת: נקה את תיבת הקלט של מזהה המשתמש בחלון התצורה, ואז לחץ על שמור.

#### ש: מה לעשות אם התצורה אבדה

ת: התצורה מאוחסנת בקובץ JSON מקומי, אם אבדה ניתן להגדיר מחדש, או לשחזר את הקובץ `data/work_profile_user.json` מגיבוי.

#### ש: בעיות הקשורות ל-Shelter

ת: אם נתקלת בבעיות הקשורות ל-Shelter:

- **כשל שיבוט**: ודא שיש לך הרשאות מנהל ומספיק שטח אחסון
- **אפליקציה משובטת לא נראית**: בדוק אם Work Profile ב-Shelter מופעל כהלכה
- **אפליקציה קורסת ב-Work Profile**: נסה לשבט מחדש את האפליקציה או לעדכן את Shelter
- **לא מוצאת אפליקציה משובטת**: חפש אפליקציות עם סמל תיק במגירת האפליקציות

## שיטות עבודה מומלצות

### שימוש בסביבת ארגון

1. **ניהול אחיד**: הגדר את אותו מזהה משתמש עבור כל מכשירי הארגון
2. **הפרדת הרשאות**: השתמש במזהי משתמש שונים כדי להבחין בין רמות הרשאה שונות
3. **גיבוי תצורה**: גבה באופן קבוע את הקובץ `work_profile_user.json`

### שימוש אישי

1. **בידוד אפליקציות**: הגדר סביבות משתמש שונות עבור אפליקציות בעלות מטרות שונות
2. **סביבת בדיקה**: השתמש במזהה משתמש עצמאי לבדיקת אפליקציות
3. **הגנת פרטיות**: שפר את אבטחת הפרטיות באמצעות הפרדת משתמשים

### ניהול כלי Shelter

1. **עדכונים קבועים**: שמור על Shelter מעודכן כדי להבטיח תאימות
2. **סנכרון אפליקציות**: ודא ששיבטת את TikTok ו-TikMatrix לפני תצורת Work Profile
3. **גיבוי הגדרות Shelter**: ייצא וגבה את תצורת Shelter לשחזור קל
4. **ניטור עדכוני אפליקציות**: כאשר TikTok או TikMatrix מתעדכנים, ייתכן שתצטרך לעדכן את הגרסאות המשובטות

## הערות טכניות

פונקציונליות Work Profile מיושמת על ידי הוספת הפרמטר `--user` לפקודות ADB:

```bash
# ללא שימוש ב-Work Profile
adb shell input tap 100 200

# שימוש ב-Work Profile (מזהה משתמש: 10)
adb shell --user 10 input tap 100 200
```

זה מבטיח שהפקודות יבוצעו בסביבת המשתמש הנכונה, נמנע מבעיות הרשאות וקונפליקטים בסביבה.

---

באמצעות תצורת Work Profile מתאימה, ניתן להשתמש בצורה חלקה ב-TikMatrix בסביבות מכשירים מורכבות שונות, ולשפר את יעילות העבודה ונוחות הניהול.
