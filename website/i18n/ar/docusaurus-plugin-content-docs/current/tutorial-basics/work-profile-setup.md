---
sidebar_position: 9
---

# إعداد ملف تعريف العمل

يدعم TikMatrix تكوين مستخدم ملف تعريف العمل بشكل منفصل لكل جهاز، وهو مفيد جدًا لاستخدام أجهزة المؤسسات أو التطبيقات المزدوجة.

## ما هو ملف تعريف العمل

ملف تعريف العمل (Work Profile) هو ميزة في Android تسمح بإنشاء بيئة عمل منفصلة على نفس الجهاز. من خلال تكوين معرفات مستخدمين مختلفة، يمكنك:

- استخدام TikMatrix بشكل طبيعي على الأجهزة المُدارة من قبل المؤسسات
- تعيين تكوينات مستخدم مختلفة لبيئات تطبيقات مختلفة
- تحقيق إدارة أجهزة وتحكم في الأذونات أكثر دقة

## استخدام أداة Shelter لاستنساخ التطبيقات

قبل تكوين ملف تعريف العمل، تحتاج إلى استخدام أداة Shelter لاستنساخ تطبيقات TikTok و TikMatrix:

### ما هو Shelter

Shelter هو تطبيق مفتوح المصدر يمكنه إنشاء وإدارة ملفات تعريف العمل على أجهزة Android. يسمح لك بتشغيل تطبيقات مكررة في بيئة عمل معزولة.

### تثبيت Shelter

1. قم بتنزيل Shelter من [F-Droid](https://f-droid.org/packages/net.typeblog.shelter/) أو [متجر Google Play](https://play.google.com/store/apps/details?id=net.typeblog.shelter)
2. قم بتثبيت وفتح Shelter على الجهاز
3. اتبع معالج الإعداد لإنشاء ملف تعريف العمل

### استنساخ التطبيقات المطلوبة

بعد إعداد Shelter، تحتاج إلى استنساخ تطبيقات TikTok و TikMatrix:

1. **استنساخ تطبيق TikTok**:
   - افتح Shelter وانتقل إلى علامة تبويب "الواجهة الرئيسية"
   - ابحث عن TikTok في قائمة التطبيقات
   - انقر على زر "استنساخ إلى ملف تعريف العمل"
   - انتظر حتى تكتمل عملية الاستنساخ

2. **استنساخ تطبيق TikMatrix**:
   - في Shelter، ابحث عن TikMatrix في قائمة التطبيقات
   - انقر على زر "استنساخ إلى ملف تعريف العمل"
   - أكد عملية الاستنساخ

### التحقق من نجاح الاستنساخ

بعد نجاح الاستنساخ:

- سترى TikTok و TikMatrix بأيقونة حقيبة في درج التطبيقات
- هذه هي نسخ ملف تعريف العمل من التطبيقات
- تظل التطبيقات الأصلية في الملف التعريفي الرئيسي دون تغيير

## كيفية تكوين ملف تعريف العمل

### 1. فتح شريط أدوات الجهاز

عندما يكون جهازك متصلاً ومعروضًا في واجهة TikMatrix الرئيسية:

1. انقر نقرًا مزدوجًا على بطاقة الجهاز للدخول إلى وضع الشاشة الكبيرة
2. سيظهر شريط أدوات على الجانب الأيمن من شاشة الجهاز
3. يكون شريط الأدوات في حالة مطوية افتراضيًا، ويتوسع تلقائيًا عند تحريك الماوس فوقه

### 2. العثور على زر ملف تعريف العمل

في أسفل شريط الأدوات، سترى زرًا بأيقونة حقيبة، وهذا هو زر تكوين ملف تعريف العمل.

### 3. تعيين معرف المستخدم

1. انقر على زر أيقونة الحقيبة
2. أدخل معرف المستخدم في مربع الحوار المنبثق (على سبيل المثال: 10)
3. انقر على زر "حفظ"

### 4. تأكيد التكوين

بعد نجاح التكوين، سيعرض النظام رسالة "تم حفظ إعداد مستخدم ملف تعريف العمل".

## شرح معرف المستخدم

### معرفات المستخدم الشائعة

- **0**: المستخدم الرئيسي (المستخدم الافتراضي)
- **10**: أول مستخدم ملف تعريف عمل
- **11**: ثاني مستخدم ملف تعريف عمل
- المزيد من معرفات المستخدمين بالتسلسل

### كيفية البحث عن معرف المستخدم

إذا لم تكن متأكدًا من معرف المستخدم على الجهاز، يمكنك البحث عنه بالطرق التالية:

```bash
adb shell pm list users
```

أو تنفيذ في أداة تصحيح TikMatrix:

```bash
pm list users
```

مثال على الإخراج:

```text
Users:
  UserInfo{0:Owner:c13} running
  UserInfo{10:Work profile:1030} running
```

## تخزين ملف التكوين

سيتم حفظ تكوين ملف تعريف العمل تلقائيًا في ملف `data/work_profile_user.json`، بالتنسيق التالي:

```json
{
  "الرقم التسلسلي للجهاز1": "10",
  "الرقم التسلسلي للجهاز2": "0",
  "الرقم التسلسلي للجهاز3": "11"
}
```

## إدارة تكوين الجهاز

### عرض التكوين الحالي

تكوين ملف تعريف العمل لكل جهاز مستقل، يمكنك:

1. تعيين معرف مستخدم مختلف لكل جهاز
2. تعديل تكوين المستخدم للأجهزة الموجودة في أي وقت
3. مسح التكوين (أدخل قيمة فارغة واحفظ لحذف التكوين)

### الإدارة الجماعية

إذا كنت بحاجة إلى إدارة عدد كبير من الأجهزة، يمكنك تحرير ملف `data/work_profile_user.json` مباشرة:

1. أغلق تطبيق TikMatrix
2. افتح ملف التكوين
3. أضف أو عدل تكوينات الأجهزة بتنسيق JSON
4. أعد تشغيل TikMatrix

## استكشاف الأخطاء وإصلاحها

### المشاكل الشائعة

#### س: فشل تنفيذ الأمر بعد تعيين ملف تعريف العمل

ج: يرجى التأكد من:

- صحة معرف المستخدم
- وجود المستخدم المقابل على الجهاز
- وجود أذونات كافية للوصول إلى ذلك المستخدم

#### س: كيفية إلغاء تكوين ملف تعريف العمل

ج: امسح حقل إدخال معرف المستخدم في مربع حوار التكوين، ثم انقر على حفظ.

#### س: ماذا لو فُقد التكوين

ج: يُخزن التكوين في ملف JSON محلي، إذا فُقد يمكنك إعادة التعيين، أو استعادة ملف `data/work_profile_user.json` من النسخة الاحتياطية.

#### س: مشاكل متعلقة بـ Shelter

ج: إذا واجهت مشاكل متعلقة بـ Shelter:

- **فشل الاستنساخ**: تأكد من وجود أذونات المسؤول ومساحة تخزين كافية
- **التطبيق المستنسخ غير مرئي**: تحقق من تفعيل ملف تعريف العمل بشكل صحيح في Shelter
- **تعطل التطبيق في ملف تعريف العمل**: حاول إعادة استنساخ التطبيق أو تحديث Shelter
- **لا يمكن العثور على التطبيق المستنسخ**: ابحث عن التطبيقات ذات أيقونة الحقيبة في درج التطبيقات

## أفضل الممارسات

### الاستخدام في بيئة المؤسسات

1. **الإدارة الموحدة**: تعيين نفس معرف المستخدم لجميع أجهزة المؤسسة
2. **فصل الأذونات**: استخدام معرفات مستخدمين مختلفة لتمييز مستويات الأذونات المختلفة
3. **نسخ احتياطي للتكوين**: نسخ احتياطي منتظم لملف `work_profile_user.json`

### الاستخدام الشخصي

1. **عزل التطبيقات**: تعيين بيئات مستخدم مختلفة للتطبيقات ذات الأغراض المختلفة
2. **بيئة الاختبار**: استخدام معرف مستخدم منفصل لاختبار التطبيقات
3. **حماية الخصوصية**: تحسين أمان الخصوصية من خلال فصل المستخدمين

### إدارة أداة Shelter

1. **التحديث المنتظم**: حافظ على تحديث تطبيق Shelter لضمان التوافق
2. **مزامنة التطبيقات**: تأكد من استنساخ TikTok و TikMatrix قبل تكوين ملف تعريف العمل
3. **نسخ احتياطي لإعدادات Shelter**: تصدير ونسخ احتياطي لتكوين Shelter للاستعادة السهلة
4. **مراقبة تحديثات التطبيق**: عندما يتم تحديث TikTok أو TikMatrix، قد تحتاج إلى تحديث النسخ المستنسخة

## ملاحظات فنية

يتم تنفيذ وظيفة ملف تعريف العمل من خلال إضافة معامل `--user` في أوامر ADB:

```bash
# بدون استخدام ملف تعريف العمل
adb shell input tap 100 200

# استخدام ملف تعريف العمل (معرف المستخدم: 10)
adb shell --user 10 input tap 100 200
```

هذا يضمن تنفيذ الأوامر في بيئة المستخدم الصحيحة، وتجنب مشاكل الأذونات وتعارضات البيئة.

---

من خلال التكوين المعقول لملف تعريف العمل، يمكنك استخدام TikMatrix بسلاسة في مختلف بيئات الأجهزة المعقدة، وتحسين كفاءة العمل وراحة الإدارة.
